# RWKV-T Mac Test Configuration
# For local testing on Mac (CPU/MPS) before GPU deployment

# Model Architecture (same as production)
model:
  dim: 256
  n_enc: 12
  n_pred: 4
  vocab_size: 2049       # Original English BPE (2048 + 1 blank)
  dropout: 0.1

# Training Hyperparameters (optimized for Mac)
train:
  batch_size: 16      # Balanced for stability with longer audio
  accum_steps: 4      # Increased for gradient stability (Effective batch 64)
  lr: 2e-5           # Set for stable convergence in Joint mode
  epochs: 30          # Safe limit for Predictor pre-training
  weight_decay: 0.01
  grad_clipping: 1.0
  seed: 42
  num_workers: 4  
  max_audio_duration: 10.0 # Doubled duration to increase hours per epoch

# Metadata & Monitoring
monitoring:
  wandb_project: "rwkv-t-asr"
  log_interval: 1     # Log every batch for debugging
  validation_hook_interval: 10
  num_validation_samples: 2
  export_manifest: false

# Path Configuration
paths:
  tokenizer_model: "bpe.model"
  checkpoint_dir: "checkpoints"
  log_file: "logs/training_log.csv"
  manifest_file: "logs/experiment_manifest.json"
